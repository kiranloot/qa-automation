---
http_interactions:
- request:
    method: get
    uri: https://DFLe4nAkwg13WPSwqmWP:X@lootcratetest-braintree.chargify.com/subscriptions/7737792.xml
    body:
      encoding: US-ASCII
      string: ''
    headers:
      Accept:
      - application/xml
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      User-Agent:
      - Ruby
  response:
    status:
      code: 200
      message: OK
    headers:
      Cache-Control:
      - must-revalidate, private, max-age=0
      Content-Type:
      - application/xml; charset=utf-8
      Date:
      - Tue, 10 Feb 2015 11:41:26 GMT
      Etag:
      - '"1c3bf7e9ccb1c464db7d7ab55603ad32"'
      P3p:
      - CP="NOI ADM DEV PSAi COM NAV OUR OTRo STP IND DEM"
      Server:
      - nginx + Phusion Passenger
      Set-Cookie:
      - _chargify_session=BAh7CEkiD3Nlc3Npb25faWQGOgZFVEkiJWZiNDdkNmEwODcyZGFlNjkxMDAyNGNiN2U3ZjkyMTllBjsAVEkiF3NlbGxlcl9jcmVkZW50aWFscwY7AEZJIgGAYjJlNjJiMjc1YzMxNzhlZGYxYzg2NjU5NmMwMmIxZDBlMWU2ODM0MGMxZGNhNDk0MTMyZmRkMDNmMTkzNDllYjkzZThkNzBiZDA3MjVmYWYyZWY5YTc4OTAyMGYwZGJjMjAyZDQxYzRmMGQ2MmMzYjcxZGIyMTRlZTk2OTc3OWQGOwBGSSIac2VsbGVyX2NyZWRlbnRpYWxzX2lkBjsARmkCADI%3D--56a3596ee8e4ae905be2c88922d21318896ce21c;
        domain=.chargify.com; path=/; secure; HttpOnly
      Status:
      - 200 OK
      Strict-Transport-Security:
      - max-age=31536000
      X-Content-Type-Options:
      - nosniff
      X-Frame-Options:
      - SAMEORIGIN
      X-Powered-By:
      - Phusion Passenger
      X-Rack-Cache:
      - miss
      X-Ratelimit-Limit:
      - '1000000'
      X-Ratelimit-Remaining:
      - '999980'
      X-Ratelimit-Reset:
      - '1423612800'
      X-Request-Id:
      - 72515cb2-15e5-4c01-9b22-cf5b94d29f9f
      X-Runtime:
      - '0.296737'
      X-Ua-Compatible:
      - IE=Edge,chrome=1
      X-Xss-Protection:
      - 1; mode=block
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: |
        <?xml version="1.0" encoding="UTF-8"?>
        <subscription>
          <activated_at type="datetime">2015-02-06T01:44:45-05:00</activated_at>
          <balance_in_cents type="integer">0</balance_in_cents>
          <cancel_at_end_of_period type="boolean" nil="true"/>
          <canceled_at type="datetime" nil="true"/>
          <cancellation_message nil="true"/>
          <created_at type="datetime">2015-02-06T01:44:45-05:00</created_at>
          <current_period_ends_at type="datetime">2015-05-05T01:44:44-04:00</current_period_ends_at>
          <expires_at type="datetime" nil="true"/>
          <id type="integer">7737792</id>
          <next_assessment_at type="datetime">2015-05-05T01:44:44-04:00</next_assessment_at>
          <payment_collection_method>automatic</payment_collection_method>
          <snap_day nil="true"/>
          <state>active</state>
          <trial_ended_at type="datetime" nil="true"/>
          <trial_started_at type="datetime" nil="true"/>
          <updated_at type="datetime">2015-02-06T01:44:46-05:00</updated_at>
          <current_period_started_at type="datetime">2015-02-06T01:44:45-05:00</current_period_started_at>
          <previous_state>active</previous_state>
          <signup_payment_id type="integer">0</signup_payment_id>
          <signup_revenue>0.00</signup_revenue>
          <delayed_cancel_at nil="true"/>
          <coupon_code>SAVE3</coupon_code>
          <total_revenue_in_cents type="integer">0</total_revenue_in_cents>
          <product_price_in_cents type="integer">5775</product_price_in_cents>
          <product_version_number type="integer">2</product_version_number>
          <payment_type>credit_card</payment_type>
          <referral_code nil="true"/>
          <current_billing_amount_in_cents type="integer">5968</current_billing_amount_in_cents>
          <customer>
            <address>3401 Pasadena Ave</address>
            <address_2 nil="true"/>
            <city>Los Angeles</city>
            <country>US</country>
            <created_at type="datetime">2015-02-06T01:44:45-05:00</created_at>
            <email>jeffects2015020501@mailinator.com</email>
            <first_name>Jeffects</first_name>
            <id type="integer">7589990</id>
            <last_name>Testcase</last_name>
            <organization nil="true"/>
            <phone nil="true"/>
            <portal_customer_created_at type="datetime" nil="true"/>
            <portal_invite_last_accepted_at type="datetime" nil="true"/>
            <portal_invite_last_sent_at type="datetime" nil="true"/>
            <reference nil="true"/>
            <state>CA</state>
            <updated_at type="datetime">2015-02-06T01:44:45-05:00</updated_at>
            <verified type="boolean">false</verified>
            <zip>90031</zip>
          </customer>
          <product>
            <accounting_code>3month</accounting_code>
            <archived_at type="datetime" nil="true"/>
            <created_at type="datetime">2014-09-15T08:33:51-04:00</created_at>
            <description>Three Month Recurring Subscription to Loot Crate! (US Only)</description>
            <expiration_interval type="integer" nil="true"/>
            <expiration_interval_unit>never</expiration_interval_unit>
            <handle>3-month-subscription</handle>
            <id type="integer">3552900</id>
            <initial_charge_in_cents type="integer" nil="true"/>
            <interval type="integer">3</interval>
            <interval_unit>month</interval_unit>
            <name>Three Month Subscription</name>
            <price_in_cents type="integer">5775</price_in_cents>
            <request_credit_card type="boolean">true</request_credit_card>
            <require_credit_card type="boolean">true</require_credit_card>
            <return_params></return_params>
            <return_url>https://polar-waters-8702.herokuapp.com/payment_completed/index?pid=2</return_url>
            <taxable type="boolean">true</taxable>
            <trial_interval type="integer" nil="true"/>
            <trial_interval_unit>month</trial_interval_unit>
            <trial_price_in_cents type="integer" nil="true"/>
            <update_return_url></update_return_url>
            <updated_at type="datetime">2015-02-05T14:20:41-05:00</updated_at>
            <product_family>
              <accounting_code nil="true"/>
              <description>Monthly Subscription Design</description>
              <handle>1993521</handle>
              <id type="integer">442941</id>
              <name>Loot Crate's Monthly Box</name>
            </product_family>
            <public_signup_pages type="array">
              <public_signup_page>
                <id type="integer">107658</id>
                <url>http://lootcratetest-braintree.chargify.com/subscribe/3d11ac6f90d2/3-month-subscription</url>
              </public_signup_page>
            </public_signup_pages>
          </product>
          <credit_card>
            <billing_address>3401 Pasadena Ave</billing_address>
            <billing_address_2 nil="true"/>
            <billing_city>Los Angeles</billing_city>
            <billing_country>US</billing_country>
            <billing_state>CA</billing_state>
            <billing_zip>90031</billing_zip>
            <card_type>bogus</card_type>
            <current_vault>bogus</current_vault>
            <customer_id type="integer">7589990</customer_id>
            <customer_vault_token nil="true"/>
            <expiration_month type="integer">2</expiration_month>
            <expiration_year type="integer">2015</expiration_year>
            <first_name>Jeffects</first_name>
            <id type="integer">5081965</id>
            <last_name>Testcase</last_name>
            <masked_card_number>XXXX-XXXX-XXXX-2</masked_card_number>
            <vault_token>2</vault_token>
            <payment_type>credit_card</payment_type>
          </credit_card>
        </subscription>
    http_version: 
  recorded_at: Tue, 10 Feb 2015 11:41:26 GMT
- request:
    method: put
    uri: https://DFLe4nAkwg13WPSwqmWP:X@lootcratetest-braintree.chargify.com/subscriptions/7737792.xml
    body:
      encoding: UTF-8
      string: |
        <?xml version="1.0" encoding="UTF-8"?>
        <subscription>
          <activated_at type="datetime">2015-02-05T22:44:45-08:00</activated_at>
          <balance_in_cents type="integer">0</balance_in_cents>
          <cancel_at_end_of_period nil="true"/>
          <canceled_at nil="true"/>
          <cancellation_message nil="true"/>
          <coupon_code>SAVE3</coupon_code>
          <created_at type="datetime">2015-02-05T22:44:45-08:00</created_at>
          <current_billing_amount_in_cents type="integer">5968</current_billing_amount_in_cents>
          <current_period_ends_at type="datetime">2015-05-04T22:44:44-07:00</current_period_ends_at>
          <current_period_started_at type="datetime">2015-02-05T22:44:45-08:00</current_period_started_at>
          <delayed_cancel_at nil="true"/>
          <expires_at nil="true"/>
          <id type="integer">7737792</id>
          <next_assessment_at type="datetime">2015-05-04T22:44:44-07:00</next_assessment_at>
          <next_billing_at type="date">2020-02-07</next_billing_at>
          <payment_collection_method>automatic</payment_collection_method>
          <payment_type>credit_card</payment_type>
          <previous_state>active</previous_state>
          <product_price_in_cents type="integer">5775</product_price_in_cents>
          <product_version_number type="integer">2</product_version_number>
          <referral_code nil="true"/>
          <signup_payment_id type="integer">0</signup_payment_id>
          <signup_revenue>0.00</signup_revenue>
          <snap_day nil="true"/>
          <state>active</state>
          <total_revenue_in_cents type="integer">0</total_revenue_in_cents>
          <trial_ended_at nil="true"/>
          <trial_started_at nil="true"/>
          <updated_at type="datetime">2015-02-05T22:44:46-08:00</updated_at>
        </subscription>
    headers:
      Content-Type:
      - application/xml
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - Ruby
  response:
    status:
      code: 500
      message: Internal Server Error
    headers:
      Content-Type:
      - text/html; charset=utf-8
      Date:
      - Tue, 10 Feb 2015 11:41:27 GMT
      Server:
      - nginx + Phusion Passenger
      Status:
      - 500 Internal Server Error
      X-Powered-By:
      - Phusion Passenger
      X-Rack-Cache:
      - invalidate, pass
      X-Request-Id:
      - 3da5bb48-ebf0-4eab-ad8e-9aebaae1be94
      X-Runtime:
      - '0.840875'
      Content-Length:
      - '3865'
      Connection:
      - keep-alive
    body:
      encoding: UTF-8
      string: |
        <!DOCTYPE html>
        <html lang="en">
        <head>
          <meta charset="utf-8">
          <title>500 Internal Error</title>
            <style>
              body {
                margin: 0;
                font-style: normal;
                font-size: 75%;
                line-height: 1.2em;
              }
              body, input, select, textarea { font-family: Arial, Helvetica, sans-serif; }
              pre, code { font-family: 'Bitstream Vera Sans Mono', "Monaco", Courier, monospace; }
              body.logged_out { background-color: #dddddd; }
              body.logged_out #app_content_wrapper { background: none; }
              body.logged_out #app_content {
                width: 367px;
                margin: 0 auto;
                background-color: white;
                border: 4px solid #cccccc;
                -moz-border-radius: 10px;
                -webkit-border-radius: 10px;
                border-radius: 10px;
                padding: 30px;
                margin-bottom: 35px;
              }
              body.logged_out #app_header {
                background: none;
                height: 85px;
                margin: 20px 0 11px;
              }
              body.logged_out #app_header #logo {
                background: url("https://d2honoqsqjbuho.cloudfront.net/assets/interface1/logo_lightbg_2.png") no-repeat center;
                height: 62px;
                text-indent: -9999px;
              }
              body.logged_out input {
                border-color: silver;
                background-color: #f4f4f4;
                margin-top: 0;
              }
              #errorExplanation {
                padding: 0 0 0 22px;
                margin-bottom: 1em;
                color: #ffffff;
                font-size: 1.3em;
                line-height: 2.2em;
                background-repeat: no-repeat;
                background-position: 0 7px;
                background-image: url("https://d2honoqsqjbuho.cloudfront.net/assets/interface1/flash-error-badge2.png");
              }
              #errorExplanation span.message {
                display: block;
                padding: 10px 10px 10px 32px;
                background: #373636;
                background-repeat: no-repeat;
                background-position: -24px 7px;
                min-height: 28px;
                -moz-border-radius: 5px;
                -webkit-border-radius: 5px;
                border-radius: 5px;
              }
              #errorExplanation h2 {
                text-align: left;
                font-weight: bold;
                padding: 10px 10px 10px 32px;
                color: #ffffff;
                font-size: 1.2em;
                background-color: #373636;
                background-repeat: no-repeat;
                background-position: -22px 7px;
                min-height: 28px;
                margin: 0;
                border-radius-topleft: 5px;
                border-radius-topright: 5px;
                -moz-border-radius-topleft: 5px;
                -moz-border-radius-topright: 5px;
                -webkit-border-top-left-radius: 5px;
                -webkit-border-top-right-radius: 5px;
                background-image: url("https://d2honoqsqjbuho.cloudfront.net/assets/interface1/flash-error-badge2.png");
                line-height:20px;
              }
              #errorExplanation p {
                padding: 10px 10px 10px 32px;
                background-color: #373636;
                margin: 0;
                font-weight: normal;
                color: #ffffff;
              }
              #errorExplanation ul {
                background-color: #373636;
                padding: 0 0 16px 32px;
                border-radius-bottomleft: 5px;
                border-radius-bottomright: 5px;
                -moz-border-radius-bottomleft: 5px;
                -moz-border-radius-bottomright: 5px;
                -webkit-border-bottom-left-radius: 5px;
                -webkit-border-bottom-right-radius: 5px;
              }
              #errorExplanation li {
                font-weight: normal;
                line-height: 1;
                list-style: disc;
              }
            </style>
        </head>

        <body class="logged_out">
          <div id="app_content_wrapper">
            <div id="app_header">
              <h1 id="logo">Chargify</h1>
            </div>
            <div id="app_content">
              <div class="errorExplanation" id="errorExplanation">
                <h2>Whoops, something didn't go as planned!</h2>
              </div>
              <p>We've logged this error and will be fixing it as soon as possible!</p>
              <p>Thanks for helping us get the bugs out!</p>
            </div>
          </div>
        </body>
        </html>
    http_version: 
  recorded_at: Tue, 10 Feb 2015 11:41:28 GMT
recorded_with: VCR 2.9.3
