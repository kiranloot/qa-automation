var LootCrate = window.LootCrate = window.LootCrate || {};
LootCrate.monthly = LootCrate.monthly || {}

LootCrate.monthly['monthly-covertops'] = function(){
  var poo=function(){},tops={init:function(){this.bindings(),this.setUpYoutube()},vars:{answer:[]},bindings:function(){tops.checkFirstInput()},checkFirstInput:function(){poo("inz"),$(".inOne").on("submit",function(e){e.preventDefault()}),$(".firstIn input").keydown(function(e){13==e.keyCode&&($(".firstIn input").val().toLowerCase(),$.ajax({type:"POST",url:"/covert_questions",data:{ques:"alpha",data:$(".firstIn input").val().toUpperCase()},dataType:"JSON"}).done(function(e){poo(e),1==e.answer?tops.goAlpha():tops.wrong("Keep Trying")}))})},wrong:function(){switch(tops.vars.scene){case"sceneAlpha":tops.vars.err="Reference your covert computer pro";break;case"sceneTwo":tops.vars.err="Take your TIME. The code is hidden but will never disappear.";break;case"sceneThree":tops.vars.err="When were they born?";break;case"sceneFour":tops.vars.err="The words are the same on every page.";break;case"sceneFive":tops.vars.err="Three brothers. One holds the key.";break;default:tops.vars.err="The keys lay within your Covert Computer Pro."}$(".soWrong").css({display:"block",opacity:1}),$(".soWrong").text(tops.vars.err),$(".soWrong").on("click",function(){$(".soWrong").css({display:"none",opacity:0})})},setUpYoutube:function(){var e=document.createElement("script");e.src="https://www.youtube.com/iframe_api";var o=document.getElementsByTagName("script")[0];o.parentNode.insertBefore(e,o)},goAlpha:function(){tops.vars.scene="sceneAlpha",tops.vars.playerAlpha=new YT.Player("playerAlpha",{height:"390",width:"100%",videoId:"USVn0zyaAwM",rel:0,playerVars:{autoplay:1,showinfo:0,controls:0,rel:0},events:{onStateChange:tops.stateChange}});var e=new TimelineMax;$(".soWrong").css({display:"none",opacity:0}),e.to($(".popOne"),.25,{opacity:1,display:"block",top:"2em",left:"-1em",scale:.8,ease:Cubic.easeOut}),e.to($(".popTwo"),.25,{opacity:1,display:"block",top:"2em",left:"6em",scale:.8,ease:Cubic.easeOut,delay:.2}),e.to($(".popThree"),.25,{opacity:1,display:"block",top:"2em",left:"6em",scale:.8,ease:Cubic.easeOut,delay:.41}),e.to($(".popFour"),1,{opacity:1,display:"block",top:"2em",left:"6em",scale:.8,ease:Cubic.easeOut,delay:1}),e.to($(".popThree"),.25,{opacity:0}),e.staggerTo($(".win"),.25,{left:"-100em"},.25),$(".alphaGo").on("click",function(){tops.vars.playerAlpha.stopVideo(),tops.goTops()})},goTops:function(){$(".soWrong").css({display:"none",opacity:0});var e=new TimelineMax;tops.vars.scene="sceneTwo",e.to($(".startScene"),1,{opacity:0,display:"none"}),e.set($(".firstQuestion input"),{scale:0,rotationX:"90deg"}),e.to($(".sceneTwo"),1,{display:"block",onComplete:tops.firstVid}),e.to($(".firstQuestion"),3,{opacity:1,delay:.2}),e.to($(".firstQuestion input"),.25,{scale:1,rotationX:"0"})},firstVid:function(){tops.vars.player=new YT.Player("playerOne",{height:"390",width:"100%",videoId:"8r2RkqNGj6Y",rel:0,playerVars:{autoplay:1,showinfo:0,controls:0,rel:0},events:{onStateChange:tops.stateChange}}),$(".firstAnswer").focus(),tops.vars.answer[0]=$(".firstAnswer").val(),$(".firstAnswer").keydown(function(e){13==e.keyCode&&$.ajax({type:"POST",url:"/covert_questions",data:{ques:"q1",data:$(this).val().toUpperCase()},dataType:"JSON"}).done(function(e){poo(e),1==e.answer?(poo("go second"),tops.vars.player.stopVideo(),tops.goSecond()):tops.wrong()})})},secondVid:function(){tops.vars.playerTwo=new YT.Player("playerTwo",{height:"390",width:"100%",videoId:"py6ci-_FpxM",rel:0,playerVars:{autoplay:1,showinfo:0,controls:0,rel:0},events:{onStateChange:tops.stateChange}}),$(".secondAnswer").focus(),tops.vars.answer[1]=$(".firstAnswer").val(),$(".goFour").on("click",function(){$(".secondAnswer.A").val().length&&$(".secondAnswer.B").val().length?$.ajax({type:"POST",url:"/covert_questions",data:{ques:"q2",data:$(".secondAnswer.A").val().toUpperCase(),dataB:$(".secondAnswer.B").val().toUpperCase()},dataType:"JSON"}).done(function(e){poo(e),1==e.answer?(poo("go second"),tops.vars.playerTwo.stopVideo(),tops.goThird()):tops.wrong()}):tops.wrong()})},thirdVid:function(){tops.vars.playerThree=new YT.Player("playerThree",{height:"390",width:"100%",videoId:"Ggpbx1zHo7M",rel:0,playerVars:{autoplay:1,showinfo:0,controls:0,rel:0},events:{onStateChange:tops.stateChange}}),$(".thirdAnswer").focus(),tops.vars.answer[1]=$(".firstAnswer").val(),$(".thirdAnswer").keydown(function(e){13==e.keyCode&&$.ajax({type:"POST",url:"/covert_questions",data:{ques:"q3",data:$(this).val().toUpperCase()},dataType:"JSON"}).done(function(e){poo(e),1==e.answer?(tops.vars.playerThree.stopVideo(),tops.goFourth()):tops.wrong()})})},fourthVid:function(){tops.vars.playerFour=new YT.Player("playerFour",{height:"390",width:"100%",videoId:"2p_q6t-VsA8",rel:0,playerVars:{autoplay:1,showinfo:0,controls:0,rel:0},events:{onStateChange:tops.stateChange}}),$(".fourthAnswer").focus(),tops.vars.answer[1]=$(".firstAnswer").val(),$(".fourthAnswer").keydown(function(e){13==e.keyCode&&$.ajax({type:"POST",url:"/covert_questions",data:{ques:"q4",data:$(this).val().toUpperCase()},dataType:"JSON"}).done(function(e){poo(e),1==e.answer?(tops.vars.playerFour.stopVideo(),tops.goWin()):tops.wrong()})})},fifthVid:function(){tops.vars.playerFive=new YT.Player("playerFive",{height:"390",width:"100%",videoId:"iXzbDTDdYKM",rel:0,playerVars:{autoplay:1,showinfo:0,controls:0,rel:0},events:{onStateChange:tops.stateChange}})},goSecond:function(){$(".soWrong").css({display:"none",opacity:0});var e=new TimelineMax;tops.vars.scene="sceneThree",e.set($(".sceneThree"),{scale:1}),e.set($(".secondQuestion input"),{scale:0}),e.to($(".sceneTwo"),1,{opacity:0,scale:0,ease:Quart.easeInOut,display:"none",onComplete:tops.firstVid}),e.to($(".sceneThree"),1,{scale:1,display:"block",onComplete:tops.secondVid}),e.to($(".secondQuestion"),3,{opacity:1,delay:.2}),e.to($(".secondQuestion input"),.25,{scale:1})},goThird:function(){$(".soWrong").css({display:"none",opacity:0});var e=new TimelineMax;tops.vars.scene="sceneFour",e.set($(".sceneFour"),{scale:1}),e.set($(".thirdQuestion input"),{scale:0}),e.to($(".sceneThree"),1,{opacity:0,scale:0,ease:Quart.easeInOut,display:"none"}),e.to($(".sceneFour"),1,{scale:1,display:"block",onComplete:tops.thirdVid}),e.to($(".thirdQuestion"),3,{opacity:1,delay:.2}),e.to($(".thirdQuestion input"),.25,{scale:1})},goFourth:function(){$(".soWrong").css({display:"none",opacity:0});var e=new TimelineMax;tops.vars.scene="sceneFive",e.set($(".sceneFive"),{scale:1}),e.set($(".fourthQuestion input"),{scale:0}),e.to($(".sceneFour"),1,{opacity:0,scale:0,ease:Quart.easeInOut,display:"none"}),e.to($(".sceneFive"),1,{scale:1,display:"block",onComplete:tops.fourthVid}),e.to($(".fourthQuestion"),3,{opacity:1,delay:.2}),e.to($(".fourthQuestion input"),.25,{scale:1})},goWin:function(){$(".soWrong").css({display:"none",opacity:0});var e=new TimelineMax;tops.vars.scene="win",$.ajax({type:"POST",url:"/covert_questions",data:{ques:"q6"},dataType:"JSON"}).done(function(e){if(poo(e),e.answer){poo("go second");var o='<iframe src="https://docs.google.com/forms/d/'+e.answer+'/viewform?embedded=true" width="100%" height="400" frameborder="0" marginheight="0" marginwidth="0">Loading...</iframe>';$(".winZone").append(o)}}),e.to($(".sceneFive"),1,{opacity:0,display:"none"}),e.to($(".winScene"),1,{display:"block",onComplete:tops.fifthVid}),e.to($(".winZone"),3,{opacity:1,delay:.2})},stateChange:function(e){switch(poo(e.data),tops.vars.scene){case"sceneTwo":if(e.data==YT.PlayerState.PLAYING){var o="What code lies behind the hidden face?";setTimeout(function(){TweenLite.to($(".firstQuestion .qText"),3,{text:o,ease:Linear.easeNone})},5e3)}break;case"sceneThree":if(e.data==YT.PlayerState.PLAYING){var t="What are the dates?";setTimeout(function(){TweenLite.to($(".secondQuestion .qText"),3,{text:t,ease:Linear.easeNone})},5e3)}break;case"sceneFour":if(e.data==YT.PlayerState.PLAYING){var t="Where does the penguin live?";setTimeout(function(){TweenLite.to($(".thirdQuestion .qText"),3,{text:t,ease:Linear.easeNone})},5e3)}break;case"sceneFive":if(e.data==YT.PlayerState.PLAYING){var t="What is the Agentâ€™s name?";setTimeout(function(){TweenLite.to($(".fourthQuestion .qText"),3,{text:t,ease:Linear.easeNone})},5e3)}}e.data==YT.PlayerState.ENDED&&(poo("done"),"sceneAlpha"==tops.vars.scene&&poo("a down"))}};$(function(){tops.init()});
};